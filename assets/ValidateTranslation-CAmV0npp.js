import{j as e,L as we,am as re,k as P,at as ie,p as Ne,au as Z,X as ne,ar as Ce,o as Se,ak as ze,ad as Ee,n as Ie,av as oe,f as de,W as Te,R as We,ae as Le}from"./ui-vendor-DEvE63cZ.js";import{J as $e,F as Re}from"./utils-vendor-CJFcDo9C.js";import{r as h}from"./react-vendor-BGp5FbCG.js";import{u as Ae,c as R}from"./index-QRt--NjA.js";import{u as Y,w as Me}from"./xlsx-C4WIP9QO.js";import{D as Oe}from"./DonutChart-Dve1txvP.js";import"./framer-vendor-DEiCTn3G.js";const W=(t,v)=>t.substring(0,v).split(`
`).length,D=t=>{const v=t.trim();return!(!t||t.length<=1||t.length<=3&&!/[a-zA-Z]/.test(t)||v.startsWith("http")||v.startsWith("https")||v.startsWith("data:")||v.startsWith("file:")||v.startsWith("javascript:")||t==="use strict"||t==="'use strict'"||!t.includes(" ")&&t.length<50||t.includes("_")||/([=\-*]){3,}/.test(t)||/^[a-zA-Z0-9_\-\/\.]+$/.test(t)||/^(SELECT|INSERT INTO|CREATE TABLE|UPDATE|DELETE FROM|DROP TABLE|ALTER TABLE|VALUES)/i.test(t)||/\b(VARCHAR|PRIMARY KEY|AUTOINCREMENT|CURRENT_TIMESTAMP|NOT NULL)\b/i.test(t)||/^(notify status|subscribe:|error:|warning:|info:|debug:)/i.test(t)||/^[ymdYMDHhmsS\/\-:\sT\.a,]+$/.test(t)||/^\d{1,2}:\d{2}(:\d{2})?(\s?[AP]M)?$/i.test(t)||/^%[\d\.]*[sdf]/.test(t)||/^%[\d\.]*[sdf][a-zA-Z\s]*$/.test(t)||t.startsWith("$"))},_e=(t,v)=>{const k=[];let f=!0;if(v==="vue"){const u=t.match(/<template[^>]*>([\s\S]*?)<\/template>/);if(u&&u[1]){const a=u[1],x=u.index||0,r=u[0],i=x+r.indexOf(a),l=/>([^<]+)</g;let n;for(;(n=l.exec(a))!==null;){const j=n[1].trim();if(j&&!j.startsWith("{{")&&!j.startsWith("<!--")&&!/^&[a-zA-Z0-9#]+;$/.test(j)&&!/^[0-9\s!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/.test(j)){const N=n.index+n[0].indexOf(n[1]),T=i+N;k.push({line:W(t,T),text:j,message:"Possible untranslated text in template"}),f=!1}}const o=/\s(label|placeholder|title|alt)="([^"]+)"/g;for(;(n=o.exec(a))!==null;){const j=n[1],N=n[2];if(N.includes(" ")&&!N.startsWith("{{")&&!N.startsWith("http")){const T=n.index+n[0].indexOf(N),L=i+T;k.push({line:W(t,L),text:N,message:`Potential untranslated attribute [${j}]`}),f=!1}}}}else if(v==="html"){let u=t.replace(/(<script[^>]*>)([\s\S]*?)(<\/script>)/gi,(i,l,n,o)=>l+" ".repeat(n.length)+o);u=u.replace(/(<style[^>]*>)([\s\S]*?)(<\/style>)/gi,(i,l,n,o)=>l+" ".repeat(n.length)+o),u=u.replace(/(<title[^>]*>)([\s\S]*?)(<\/title>)/gi,(i,l,n,o)=>l+" ".repeat(n.length)+o);const a=/>([^<]+)</g;let x;for(;(x=a.exec(u))!==null;){const i=x[1].trim();if(i&&!i.startsWith("{{")&&!i.startsWith("<%")&&!i.startsWith("<!--")&&!/^&[a-zA-Z0-9#]+;$/.test(i)&&!/^[0-9\s!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/.test(i)){const l=x.index+x[0].indexOf(x[1]);k.push({line:W(t,l),text:i,message:"Possible untranslated HTML text"}),f=!1}}const r=/\s(label|placeholder|title|aria-label)="([^"]+)"/g;for(;(x=r.exec(u))!==null;){const i=x[1],l=x[2];if(l.includes(" ")&&!l.startsWith("{{")&&!l.startsWith("http")&&!l.startsWith("#")){const n=x.index+x[0].indexOf(l);k.push({line:W(t,n),text:l,message:`Potential untranslated HTML attribute [${i}]`}),f=!1}}}else if(v==="tsx"||v==="ts"||v==="js"){const u=/>([^<{]+)</g;let a;for(;(a=u.exec(t))!==null;){const l=a[1].trim();if(l&&!l.startsWith("{")&&!/^[0-9\s!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/.test(l)){const n=a.index+a[0].indexOf(a[1]);k.push({line:W(t,n),text:l,message:"Possible untranslated JSX text"}),f=!1}}const x=/\s(label|placeholder|title|alt)="([^"]+)"/g;for(;(a=x.exec(t))!==null;){const l=a[1],n=a[2];if(n.includes(" ")&&!n.startsWith("{")&&!n.startsWith("http")){const o=a.index+a[0].indexOf(n);k.push({line:W(t,o),text:n,message:`Potential untranslated JSX attribute [${l}]`}),f=!1}}const r=/(['"`])(.*?)\1/g;let i;for(;(i=r.exec(t))!==null;){const l=i[2];if(!D(l))continue;const n=[/^(flex|grid|block|hidden|absolute|relative|fixed|w-|h-|p-|m-|text-|bg-|border-|rounded-|gap-|items-|justify-)/];if(l.split(" ").filter(A=>n.some(V=>V.test(A))).length>=2)continue;const o=i.index,j=t.substring(Math.max(0,o-50),o);if(/(className|class)\s*[:=]\s*$/.test(j.trimEnd())||/(throw\s+new\s+[a-zA-Z0-9_$]+|new\s+[a-zA-Z0-9_$]*(Error|Exception)|throw)\s*\(?\s*$/.test(j.trimEnd()))continue;const N=t.lastIndexOf(`
`,o)+1,T=t.indexOf(`
`,o),L=t.substring(N,T!==-1?T:t.length);if(L.trim().startsWith("//")||/(console|BizMOBLogger)\.(log|debug|info|warn|error)|(\.log\()/.test(L))continue;const $=o+1;k.push({line:W(t,$),text:l,message:"Suspicious string literal"}),f=!1}}else if(v==="android-xml"){const u=/android:(text|hint|contentDescription|title|summary)="([^"]+)"/g;let a;for(;(a=u.exec(t))!==null;){const x=a[1],r=a[2];if(r.startsWith("@")||r.startsWith("?")||/^[0-9\s!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/.test(r))continue;const i=a.index+a[0].indexOf(r);k.push({line:W(t,i),text:r,message:`Hardcoded Android XML attribute [${x}]`}),f=!1}}else if(v==="kotlin"||v==="java"){const u=/"([^"\\]*(?:\\.[^"\\]*)*)"/g;let a;const x=t.replace(/\/\*[\s\S]*?\*\//g,r=>" ".repeat(r.length));for(;(a=u.exec(x))!==null;){const r=a[1];if(!D(r))continue;const i=a.index,l=t.lastIndexOf(`
`,i)+1,n=t.indexOf(`
`,i),o=t.substring(l,n!==-1?n:t.length);if(o.trim().startsWith("//")||/Toast\.makeText\(/.test(o))continue;const j=t.substring(Math.max(0,i-300),i);if(/(Log\.[civdwe]|Logger\.|System\.out\.|Timber\.|BizMOBLogger\.|println\()|(\.log\()/.test(o)||/(Log\.[civdwe]|Logger\.|System\.out\.|Timber\.|BizMOBLogger\.|println\()[\s\S]*$/.test(j)||/(\.addHeader\(|\.header\(|\.setRequestProperty\()/.test(o)||/\.(startsWith|endsWith|contains|equals|indexOf|lastIndexOf|matches|replace|split)\(/.test(o)||o.trim().startsWith("@")||/(extra|key|action|name|id|tag|token|pref)/i.test(o)&&!o.includes("Title")&&!o.includes("Message"))continue;const N=t.substring(Math.max(0,i-300),i);/(throw\s+|Exception\(|Error\()/.test(o)||/(throw\s+new\s+[a-zA-Z0-9_.]+|throw\s+[a-zA-Z0-9_.]+\()[\s\S]*$/.test(N)||(k.push({line:W(t,i+1),text:r,message:"Hardcoded string literal"}),f=!1)}}else if(v==="swift"||v==="objc"){const u=v==="objc"?/@"([^"\\]*(?:\\.[^"\\]*)*)"/g:/"([^"\\]*(?:\\.[^"\\]*)*)"/g;let a;for(;(a=u.exec(t))!==null;){const x=a[1];if(!D(x))continue;const r=a.index,i=t.lastIndexOf(`
`,r)+1,l=t.indexOf(`
`,r),n=t.substring(i,l!==-1?l:t.length);n.trim().startsWith("//")||/NSLocalizedString/.test(n)||/(print\(|NSLog|os_log|debugPrint)/.test(n)||/(identifier|key|name|vc|controller|storyboard|segue)/i.test(n)||(k.push({line:W(t,r+1+(v==="objc"?1:0)),text:x,message:"Hardcoded string literal"}),f=!1)}}else if(v==="ios-xib"){const u=/\s(text|title|placeholder|headerTitle|footerTitle)="([^"]+)"/g;let a;for(;(a=u.exec(t))!==null;){const x=a[1],r=a[2];if(/^[A-Za-z0-9]{3}-[A-Za-z0-9]{3}-[A-Za-z0-9]{3}$/.test(r)||!D(r))continue;const i=a.index+a[0].indexOf(r);k.push({line:W(t,i),text:r,message:`Hardcoded XIB/Storyboard string [${x}]`}),f=!1}}else{const u=/import.*(i18n|vue-i18n|react-i18next|useTranslation)/.test(t),a=/(\$t\(|t\(|i18n\.t\()/.test(t);if(!u&&!a){const x=/(['"`])(.*?)\1/g;let r,i=0;for(;(r=x.exec(t))!==null;){const l=r[2];if(!D(l))continue;const n=[/^(flex|grid|block|hidden|absolute|relative|fixed|w-|h-|p-|m-|text-|bg-|border-|rounded-|gap-|items-|justify-)/];if(l.split(" ").filter($=>n.some(A=>A.test($))).length>=2)continue;const o=r.index,j=t.substring(Math.max(0,o-20),o);if(/(className|class)\s*[:=]\s*$/.test(j.trimEnd()))continue;const N=t.lastIndexOf(`
`,o)+1,T=t.indexOf(`
`,o),L=t.substring(N,T!==-1?T:t.length);if(!L.trim().startsWith("//")&&!/(console|BizMOBLogger)\.(log|debug|info|warn|error)/.test(L)&&(i++,i<=10)){const $=o+1;k.push({line:W(t,$),text:l,message:"Suspicious string literal"})}}i>0&&(f=!1,k.length===0&&k.push({line:0,text:`${i} potentially untranslated strings found`,message:"General file check"}))}}return{isValid:f,details:k}};function Ue(){const{t}=Ae(),[v,k]=h.useState(!1),[f,u]=h.useState(!1),[a,x]=h.useState([]),[r,i]=h.useState(new Set),[l,n]=h.useState([]),[o,j]=h.useState(""),[N,T]=h.useState(!1),[L,$]=h.useState(!0),[A,V]=h.useState(null),[I,K]=h.useState(null),[M,F]=h.useState("list"),[B,Q]=h.useState(null),[G,ee]=h.useState(0),[te,se]=h.useState(""),[H,ce]=h.useState(""),[xe,ae]=h.useState(null),U=h.useRef(null),X=h.useCallback(s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?k(!0):s.type==="dragleave"&&k(!1)},[]),ge=h.useCallback(s=>{i(d=>{const c=new Set(d);return c.has(s)?c.delete(s):c.add(s),c})},[]),he=h.useCallback(()=>{x([]),i(new Set),T(!1),V(null)},[]),q=h.useMemo(()=>{const s=a.filter(m=>!r.has(m.path)),d=s.length,c=s.filter(m=>m.isValid).length,C=d-c;return{total:d,valid:c,invalid:C}},[a,r]),O=h.useMemo(()=>{let s=a;if(N&&(s=s.filter(d=>!r.has(d.path))),L&&(s=s.filter(d=>!d.isValid)),H){const d=H.toLowerCase();s=s.filter(c=>c.path.toLowerCase().includes(d))}return s},[a,r,N,L,H]),_=h.useCallback(async(s,d=!1)=>{u(!0),x([]),d||i(new Set),T(!1),$(!0),V(s);try{const C=await new $e().loadAsync(s),m=[],g=Object.entries(C.files).filter(([b,w])=>{const E=b.split("/"),p=E[E.length-1];return!(w.dir||l.some(y=>p.toLowerCase().endsWith(y))||b.includes("__MACOSX")||b.includes("node_modules")||b.includes(".git")||p.startsWith("."))}),z=g.length;let S=0;for(const[b,w]of g){S++;const E=S/z*100;ee(E),se(b),await new Promise(je=>setTimeout(je,1));const p=b.toLowerCase();let y="other";if(p.endsWith(".vue")?y="vue":p.endsWith(".ts")?y="ts":p.endsWith(".js")?y="js":p.endsWith(".tsx")?y="tsx":p.endsWith(".xml")?y="android-xml":p.endsWith(".kt")?y="kotlin":p.endsWith(".java")?y="java":p.endsWith(".swift")?y="swift":p.endsWith(".xib")||p.endsWith(".storyboard")?y="ios-xib":p.endsWith(".m")||p.endsWith(".h")?y="objc":(p.endsWith(".html")||p.endsWith(".htm"))&&(y="html"),y==="other")continue;const J=await w.async("string"),le=_e(J,y);m.push({path:b,isValid:le.isValid,details:le.details,type:y,content:J})}x(m.sort((b,w)=>b.isValid===w.isValid?0:b.isValid?1:-1))}catch(c){console.error("Failed to unzip or analyze",c)}finally{u(!1),ee(0),se("")}},[l]),ue=h.useCallback(()=>{A&&_(A,!0)},[A,_]),me=h.useCallback(s=>{s.preventDefault(),s.stopPropagation(),k(!1);const c=Array.from(s.dataTransfer.files).find(C=>C.name.endsWith(".zip"));c&&_(c)},[_]),pe=s=>{s.target.files&&s.target.files[0]&&_(s.target.files[0])},fe=h.useCallback(()=>{const s=[t("validation.fileName"),t("validation.type"),t("validation.status"),t("validation.ignored"),t("validation.line"),t("validation.untranslatedText"),t("validation.contextMessage")],d=[];O.filter(m=>!r.has(m.path)).forEach(m=>{const g=r.has(m.path),z=m.isValid?t("validation.translated"):t("validation.untranslated"),S=t(g?"validation.statusLabel.ignored":"common.no");m.details&&m.details.length>0?m.details.forEach(b=>{d.push([`"${m.path}"`,`"${m.type}"`,`"${z}"`,`"${S}"`,`"${b.line}"`,`"${b.text.replace(/"/g,'""')}"`,`"${b.message.replace(/"/g,'""')}"`].join(","))}):d.push([`"${m.path}"`,`"${m.type}"`,`"${z}"`,`"${S}"`,'""','""','""'].join(","))});const c=[s.join(","),...d].join(`
`),C=new Blob([c],{type:"text/csv;charset=utf-8"});Re.saveAs(C,"validation_report.csv")},[O,r]),be=h.useCallback(()=>{const s=[t("validation.filePath"),t("validation.fileName"),t("validation.type"),t("validation.status"),t("validation.ignored"),t("validation.line"),t("validation.untranslatedText"),t("validation.contextMessage")],d=[s];O.filter(g=>!r.has(g.path)).forEach(g=>{const z=r.has(g.path),S=g.isValid?t("validation.translated"):t("validation.untranslated"),b=t(z?"validation.statusLabel.ignored":"common.no"),w=g.path.split("/").pop()||g.path;g.details&&g.details.length>0?g.details.forEach(E=>{d.push([g.path,w,g.type,S,b,E.line,E.text,E.message])}):d.push([g.path,w,g.type,S,b,"","",""])});const c=Y.aoa_to_sheet(d),C=s.map((g,z)=>{const S=d.reduce((b,w)=>{const E=w[z]?String(w[z]):"";return Math.max(b,E.length)},10);return{wch:Math.min(S,50)}});c["!cols"]=C;const m=Y.book_new();Y.book_append_sheet(m,c,"Validation Report"),Me(m,"validation_report.xlsx")},[O,r]),ve=s=>{K(s),F(s.isValid?"code":"list"),Q(null)};h.useEffect(()=>{if(M==="code"&&B&&U.current){const s=U.current.querySelector(`[data-line="${B}"]`);s&&s.scrollIntoView({behavior:"smooth",block:"center"})}},[M,B]);const ye=s=>{F("code"),Q(s)},ke=s=>{navigator.clipboard.writeText(s),ae(s),setTimeout(()=>ae(null),2e3)};return e.jsxs("div",{className:"h-full flex flex-col p-8 max-w-[1400px] mx-auto w-full relative font-khmer",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-8 text-slate-800 dark:text-white flex items-center gap-3",children:[e.jsx(we,{className:"text-blue-600",size:32}),t("app.validateTranslation","Validate Translation")]}),a.length===0&&e.jsxs("div",{className:R("relative border-2 border-dashed rounded-xl p-12 transition-all text-center mb-8 bg-white dark:bg-gray-800 flex flex-col items-center justify-center min-h-[400px]",v&&!f?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700",!f&&"cursor-pointer hover:border-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),onDragEnter:f?void 0:X,onDragOver:f?void 0:X,onDragLeave:f?void 0:X,onDrop:f?void 0:me,onClick:()=>!f&&document.getElementById("file-upload")?.click(),children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".zip",onChange:pe,disabled:f}),f?e.jsxs("div",{className:"flex flex-col items-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative w-32 h-32 mb-8",children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 100 100",children:[e.jsx("circle",{className:"text-gray-100 dark:text-gray-700 stroke-current",strokeWidth:"8",cx:"50",cy:"50",r:"40",fill:"transparent"}),e.jsx("circle",{className:"text-blue-500 progress-ring__circle stroke-current transition-all duration-300 ease-out",strokeWidth:"8",strokeLinecap:"round",cx:"50",cy:"50",r:"40",fill:"transparent",strokeDasharray:"251.2",strokeDashoffset:251.2-251.2*G/100})]}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:e.jsxs("span",{className:"text-3xl font-bold text-slate-700 dark:text-white",children:[Math.round(G),"%"]})})]}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:t("validation.analyzing","Analyzing codebase...")}),e.jsx("div",{className:"w-full max-w-2xl text-center mt-2 px-4",children:e.jsxs("p",{className:"text-xs font-mono text-slate-500 dark:text-gray-400 truncate animate-pulse leading-relaxed",style:{direction:"rtl"},title:te,children:[te," â€Ž"]})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-50 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx(re,{size:40})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-slate-700 dark:text-gray-200",children:t("validation.dragDrop")}),e.jsx("p",{className:"text-base text-slate-500 dark:text-gray-400 mt-2",children:t("validation.browse")})]})]})]}),a.length>0&&e.jsxs("div",{className:"flex-1 flex flex-col gap-6 h-full overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[e.jsx(Oe,{items:[{id:"valid",value:q.valid,color:"text-green-500",bg:"bg-green-500",icon:P,label:t("validation.valid")},{id:"invalid",value:q.invalid,color:"text-red-500",bg:"bg-red-500",icon:ie,label:t("validation.invalid")}],total:q.total,centerSubLabel:t("validation.total")}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white dark:bg-gray-800 p-2 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative group grow lg:grow-0",children:[e.jsx(Ne,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:t("validation.searchFiles","Search files..."),value:H,onChange:s=>ce(s.target.value),className:"pl-9 pr-3 py-1.5 text-sm bg-slate-50 dark:bg-gray-900 border-none rounded-lg w-full lg:w-56 focus:ring-2 focus:ring-blue-500/50 transition-all placeholder:text-slate-400 text-slate-700 dark:text-gray-200"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 px-3 py-1.5 bg-slate-50 dark:bg-gray-900 border border-transparent focus-within:ring-2 focus-within:ring-blue-500/50 rounded-lg w-full sm:max-w-xs transition-all cursor-text min-h-[36px]",onClick:()=>document.getElementById("extension-input")?.focus(),children:[e.jsx(Z,{size:14,className:"text-gray-400 mr-1"}),l.map((s,d)=>e.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium px-2 py-0.5 bg-white dark:bg-gray-800 text-slate-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 rounded-md",children:[s,e.jsx("button",{onClick:c=>{c.stopPropagation(),n(C=>C.filter((m,g)=>g!==d))},className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(ne,{size:12})})]},d)),e.jsx("input",{id:"extension-input",type:"text",placeholder:l.length===0?"Ignore ext (.spec.ts)":"",value:o,onChange:s=>j(s.target.value),onKeyDown:s=>{if(s.key==="Enter"||s.key===","){s.preventDefault();const d=o.trim().toLowerCase();d&&!l.includes(d)&&(n([...l,d]),j(""))}else s.key==="Backspace"&&!o&&l.length>0&&n(l.slice(0,-1))},className:"bg-transparent border-none outline-none text-sm text-slate-700 dark:text-gray-200 placeholder:text-slate-400 min-w-[80px] flex-1 p-0"})]}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-gray-300 cursor-pointer select-none hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:s=>$(s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t("validation.showInvalidOnly")]}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-gray-300 cursor-pointer select-none hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:s=>T(s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t("validation.hideIgnored")]}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:be,className:"p-2 text-emerald-700 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-all active:scale-95",title:t("validation.exportExcel"),children:e.jsx(Ce,{size:18})}),e.jsx("button",{onClick:fe,className:"p-2 text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-all active:scale-95",title:t("validation.exportCsv"),children:e.jsx(Se,{size:18})}),e.jsx("button",{onClick:ue,disabled:f,className:"p-2 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-all active:scale-95 disabled:opacity-50",title:t("validation.reAnalyze"),children:e.jsx(ze,{size:18,className:R(f&&"animate-spin")})}),e.jsx("button",{onClick:he,className:"p-2 text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-gray-700 hover:bg-slate-200 dark:hover:bg-gray-600 rounded-lg transition-all active:scale-95",title:t("validation.uploadNew"),children:e.jsx(re,{size:18})})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 min-h-0",children:e.jsxs("table",{className:"w-full text-left table-fixed",children:[e.jsx("thead",{className:"bg-gray-50/50 dark:bg-gray-900/50 sticky top-0 z-10 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-5 w-16 text-center"}),e.jsx("th",{className:"p-5 font-semibold text-slate-500 dark:text-slate-400 text-sm w-56",children:t("validation.fileName")}),e.jsx("th",{className:"p-5 font-semibold text-slate-500 dark:text-slate-400 text-sm w-24 text-center",children:t("validation.type")}),e.jsx("th",{className:"p-5 font-semibold text-slate-500 dark:text-slate-400 text-sm w-40 text-right",children:t("validation.status")}),e.jsx("th",{className:"p-5 font-semibold text-slate-500 dark:text-slate-400 text-sm text-right",children:t("validation.issuesOverview")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:O.map((s,d)=>{const c=r.has(s.path),C=s.details?.length||0,m=s.path.split("/").pop()||s.path;return e.jsxs("tr",{onClick:()=>ve(s),className:R("group hover:bg-blue-50/50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer",c&&"opacity-50 grayscale"),children:[e.jsx("td",{className:"p-5 text-center",children:e.jsx("button",{onClick:g=>{g.stopPropagation(),ge(s.path)},className:R("p-2 rounded-full transition-all duration-200",c?"text-slate-400 hover:text-blue-500 hover:bg-blue-50":"text-slate-300 group-hover:text-slate-500 dark:text-gray-600 dark:group-hover:text-gray-400"),title:c?"Unignore":"Ignore file",children:c?e.jsx(Z,{size:18}):e.jsx(Ee,{size:18})})}),e.jsxs("td",{className:"p-5",children:[e.jsx("div",{className:"font-mono text-sm text-slate-700 dark:text-gray-300 truncate",title:s.path,children:m}),c&&e.jsx("span",{className:"inline-block mt-1 text-[10px] font-bold uppercase tracking-wider bg-slate-100 text-slate-500 dark:bg-gray-700 dark:text-gray-400 px-2 py-0.5 rounded-full",children:t("validation.statusLabel.ignored")})]}),e.jsx("td",{className:"p-5 text-center",children:e.jsx("span",{className:"inline-block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:s.type})}),e.jsx("td",{className:"p-5 text-right",children:s.isValid?e.jsx("div",{className:"inline-flex flex-col items-end",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-4 py-1.5 rounded-full text-sm font-bold bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400 border border-green-100 dark:border-green-900/30",children:[e.jsx(P,{size:14,className:"stroke-[2.5]"}),t("validation.translated")]})}):c?e.jsx("div",{className:"inline-flex flex-col items-end",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-4 py-1.5 rounded-full text-sm font-bold bg-slate-100 text-slate-500 dark:bg-gray-800 dark:text-gray-400 border border-slate-200 dark:border-gray-700",children:[e.jsx(Z,{size:14,className:"stroke-[2.5]"}),t("validation.ignored")]})}):e.jsx("div",{className:"inline-flex flex-col items-end",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-4 py-1.5 rounded-full text-sm font-bold bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 border border-red-100 dark:border-red-900/30",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),t("validation.untranslated"),e.jsx("span",{className:"ml-1 bg-white dark:bg-red-900/40 px-1.5 rounded-md text-xs py-0.5 shadow-sm text-red-700 dark:text-red-300",children:C})]})})}),e.jsx("td",{className:"p-5",children:s.details&&s.details.length>0?e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[s.details.slice(0,3).map((g,z)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm max-w-full",children:[e.jsx("span",{className:"truncate text-slate-600 dark:text-gray-400 max-w-[200px]",title:g.text,children:g.text}),e.jsxs("span",{className:"shrink-0 flex items-center justify-center bg-slate-100 dark:bg-gray-700 text-slate-500 dark:text-gray-400 px-1.5 py-0.5 rounded text-[10px] font-mono font-bold min-w-[24px]",children:["L",g.line]})]},z)),s.details.length>3&&e.jsxs("span",{className:"text-xs font-medium text-slate-400 dark:text-gray-500 italic mt-1",children:["+",s.details.length-3," more issues"]})]}):e.jsx("div",{className:"text-right text-sm text-slate-300 dark:text-gray-600 italic",children:t("validation.noIssues")})})]},d)})})]})})]}),I&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/20 backdrop-blur-sm rounded-xl",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden ring-1 ring-black/5",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white truncate flex items-center gap-2",children:[e.jsx(Ie,{size:20,className:"text-blue-500"}),I.path]}),e.jsx("span",{className:"text-xs text-slate-400 dark:text-gray-500 font-mono mt-0.5 ml-7",children:I.type.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[e.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>F("list"),className:R("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-semibold transition-all",M==="list"?"bg-white dark:bg-gray-600 text-slate-800 dark:text-white shadow-sm":"text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200"),children:[e.jsx(oe,{size:16}),t("validation.view.list")]}),e.jsxs("button",{onClick:()=>F("code"),className:R("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-semibold transition-all",M==="code"?"bg-white dark:bg-gray-600 text-slate-800 dark:text-white shadow-sm":"text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200"),children:[e.jsx(de,{size:16}),t("validation.view.code")]})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-gray-700 mx-1"}),e.jsx("button",{onClick:s=>{s.stopPropagation(),K(null)},className:"p-2 text-slate-400 hover:text-slate-600 dark:text-gray-500 dark:hover:text-gray-300 hover:bg-slate-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(ne,{size:24})})]})]}),e.jsx("div",{className:"p-0 overflow-hidden flex-1 flex flex-col bg-slate-50 dark:bg-gray-900",children:M==="list"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 flex-shrink-0 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider mb-1",children:t("validation.status")}),I.isValid?e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-base font-bold text-green-600 dark:text-green-400",children:[e.jsx(P,{size:18})," ",t("validation.translated")]}):r.has(I.path)?e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-base font-bold text-slate-500 dark:text-gray-400",children:[e.jsx(Z,{size:18})," ",t("validation.ignored")]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-base font-bold text-red-600 dark:text-red-400",children:[e.jsx(Te,{size:18})," ",t("validation.untranslated")]})]}),e.jsx("div",{className:R("p-3 rounded-full bg-opacity-10",I.isValid?"bg-green-500 text-green-500":"bg-red-500 text-red-500"),children:I.isValid?e.jsx(P,{size:24}):e.jsx(ie,{size:24})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider mb-1",children:t("validation.totalIssues")}),e.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:I.details?.length||0})]}),e.jsx("div",{className:"p-3 rounded-full bg-blue-50 text-blue-500 dark:bg-blue-900/20 dark:text-blue-400",children:e.jsx(oe,{size:24})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-0 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:I.details&&I.details.length>0?e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/80 sticky top-0 border-b border-gray-100 dark:border-gray-700 font-semibold text-slate-500 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-20 text-center",children:t("validation.line")}),e.jsx("th",{className:"p-4 w-1/3",children:t("validation.untranslatedText")}),e.jsx("th",{className:"p-4",children:t("validation.contextMessage")}),e.jsx("th",{className:"p-4 w-16"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:I.details.map((s,d)=>e.jsxs("tr",{className:"hover:bg-blue-50/50 dark:hover:bg-gray-700/30 cursor-pointer group transition-colors",onClick:()=>ye(s.line),children:[e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-gray-700 text-slate-500 dark:text-gray-400 font-mono text-xs font-bold",children:s.line})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2 group/text",children:[e.jsx("div",{className:"font-mono text-sm break-all text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/10 p-2 rounded border border-red-100 dark:border-red-900/20 flex-1",children:s.text}),e.jsx("button",{onClick:c=>{c.stopPropagation(),ke(s.text)},className:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-all opacity-0 group-hover/text:opacity-100 focus:opacity-100",title:t("common.copy"),children:xe===s.text?e.jsx(We,{size:16,className:"text-green-500"}):e.jsx(Le,{size:16})})]})}),e.jsx("td",{className:"p-4 text-slate-600 dark:text-gray-300 text-sm",children:s.message}),e.jsx("td",{className:"p-4 text-center text-slate-300 group-hover:text-blue-500",children:e.jsx(de,{size:16})})]},d))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-12 text-slate-400",children:[e.jsx(P,{size:48,className:"mb-4 text-green-100 dark:text-green-900/30"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-gray-300",children:t("validation.noUntranslatedFound")}),e.jsx("p",{className:"text-sm text-slate-400",children:t("validation.noIssues")})]})})]}):e.jsx("div",{className:"flex-1 overflow-auto bg-[#1e1e1e] text-blue-100 text-sm font-mono p-6 leading-relaxed",ref:U,children:I.content?e.jsx("div",{className:"relative",children:I.content.split(`
`).map((s,d)=>{const c=d+1,C=I.details?.filter(S=>S.line===c),m=C&&C.length>0,g=B===c,z=S=>S.split(/(<[^>]+>)/g).map((w,E)=>w.startsWith("<")&&w.endsWith(">")?e.jsx("span",{className:"text-blue-400",children:w},E):e.jsx("span",{className:"text-gray-300",children:w},E));return e.jsxs("div",{"data-line":c,className:R("flex -mx-6 px-6 border-l-4",g?"bg-yellow-900/30 border-yellow-500":m?"bg-red-900/10 border-red-500/50":"border-transparent hover:bg-white/5"),children:[e.jsx("div",{className:"w-12 text-right pr-4 text-gray-500 select-none flex-shrink-0 text-xs py-0.5",children:c}),e.jsx("div",{className:"flex-1 whitespace-pre-wrap break-all py-0.5",children:m?(()=>{const S=p=>p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),b=Array.from(new Set(C.map(p=>p.text))).sort((p,y)=>y.length-p.length);if(b.length===0)return z(s);const w=new RegExp(`(${b.map(S).join("|")})`,"g"),E=s.split(w);return e.jsx(e.Fragment,{children:E.map((p,y)=>b.includes(p)?e.jsxs("span",{className:"bg-red-500/30 text-red-200 rounded px-0.5 box-decoration-clone outline outline-1 outline-red-500/60 relative group cursor-help",children:[p,e.jsx("span",{className:"hidden group-hover:block absolute bottom-full left-1/2 -translate-x-1/2 mb-2 p-2 bg-black text-white text-xs rounded shadow-lg whitespace-nowrap z-50",children:t("validation.untranslatedText")})]},y):z(p))})})():z(s)})]},d)})}):e.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:t("validation.noContent")})})})]})})]})}export{Ue as ValidateTranslation};
