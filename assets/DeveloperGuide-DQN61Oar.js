import{j as e,B as F,o as M,aZ as P,p as E,b as O,bu as U,aQ as W,y as B,bv as Z,bw as I,f as H,x as J}from"./ui-vendor-DEvE63cZ.js";import{r as z}from"./react-vendor-BGp5FbCG.js";import{u as K,c as D}from"./index-QRt--NjA.js";import{J as T}from"./utils-vendor-CJFcDo9C.js";import{DropZone as Y}from"./DropZone-Ddsx4Ooe.js";import{d as Q}from"./codeQualityRules-FkB7fbAO.js";import{v as X}from"./vsc-dark-plus-CcVsXCy1.js";import"./framer-vendor-DEiCTn3G.js";const L=a=>a.replace(/\/\*\*|\*\/|\/\/\/|\/\//g,"").split(`
`).map(o=>o.trim().replace(/^\*\s?/,"")).filter(o=>o.length>0).join(`
`),C=(a,o)=>{const p=a.substring(0,o).trimEnd();if(p.endsWith("*/")){const t=p.lastIndexOf("/**");if(t!==-1)return L(p.substring(t))}const s=p.split(`
`),g=[];for(let t=s.length-1;t>=0;t--){const n=s[t].trim();if(n.startsWith("///")||n.startsWith("//"))g.unshift(n);else break}if(g.length>0)return L(g.join(`
`))},q=(a,o)=>{let p=0,s=!1,g=-1;for(let t=o;t<a.length;t++)if(a[t]==="{")s||(s=!0,g=t),p++;else if(a[t]==="}"&&(p--,s&&p===0))return a.substring(g+1,t);return null},V=(a,o)=>{const p=[],s=a.replace(/\r\n/g,`
`);if(o==="react-ts"||o==="vue-ts"||o==="react-native"){const g=/(?:\/\*\*[\s\S]*?\*\/[\s\S]*?)?\b(export\s+)?(default\s+)?(class|interface|type|enum)\s+([A-Z][a-zA-Z0-9_]*)/g;let t;for(;(t=g.exec(s))!==null;){const[,d,f,c,u]=t,v=t.index,j=C(s,v);let m=[];const w=v+t[0].length,$=s.indexOf("{",w);if($!==-1&&$<w+50){const r=q(s,w);if(r){const h=/(?:\/\*\*[\s\S]*?\*\/[\s\S]*?)?\b([a-zA-Z0-9_]+)(\?)?\s*:\s*([a-zA-Z0-9_<>\[\]|&\s.]+)(?:;|=|$)/g;let i;for(;(i=h.exec(r))!==null;){const[,l,y,N]=i,x=C(r,i.index);["constructor","return"].includes(l)||m.push({id:`${u}-prop-${l}-${i.index}`,name:l,type:"property",signature:`${l}${y||""}: ${N.trim()}`,description:x,line:0})}const b=/(?:\/\*\*[\s\S]*?\*\/[\s\S]*?)?\b([a-zA-Z0-9_]+)\s*(\(.*?\))\s*:\s*([a-zA-Z0-9_<>\[\]|&\s.]+)(?:;|$)/g;let k;for(;(k=b.exec(r))!==null;){const[,l,y,N]=k,x=C(r,k.index);m.push({id:`${u}-method-${l}-${k.index}`,name:l,type:"function",signature:`${l}${y}: ${N.trim()}`,description:x,line:0})}}}p.push({id:`${c}-${u}-${v}`,name:u,type:c,signature:`${d||""}${f||""}${c} ${u}`.trim(),description:j,line:s.substring(0,v).split(`
`).length,children:m.length>0?m:void 0})}const n=/(?:\/\*\*[\s\S]*?\*\/[\s\S]*?)?\b(export\s+)?(?:async\s+)?(?:function\s+([a-zA-Z0-9_]+)\s*((?:<[^>]+>)?\s*\([^)]*\)(?:\s*:\s*[^{]+)?)|const\s+([a-zA-Z0-9_]+)\s*=\s*(?:async\s*)?((?:<[^>]+>)?\s*\([^)]*\)(?:\s*=>|\s*:\s*[^{]+)|[a-zA-Z0-9_]+\s*=>))/g;for(;(t=n.exec(s))!==null;){const[,d,f,c,u,v,j]=t,m=c||v,w=(u||j||"").replace(/\s*=>\s*$/,"").trim(),$=t.index,r=C(s,$);m&&!p.some(h=>h.name===m)&&p.push({id:`func-${m}-${$}`,name:m,type:"function",signature:`${d||""}${f?"async ":""}function ${m}${w.startsWith("(")||w.startsWith("<")?w:`(${w})`}`,description:r,line:s.substring(0,$).split(`
`).length})}}else if(o==="android-kotlin"){const g=/(?:\/\*\*[\s\S]*?\*\/[\s\S]*?)?\b(class|interface|object|enum|fun|val|var)\s+([a-zA-Z0-9_]+)(?:<[^>]+>)?\s*(?:\(([^)]*)\))?(?:\s*:\s*([^{=]+))?/g;let t;for(;(t=g.exec(s))!==null;){const[,n,d,f,c]=t,u=t.index,v=C(s,u);let j,m=`${n} ${d}`;["class","interface","object","enum"].includes(n)?(j=n==="enum"?"enum":"class",c&&(m+=`: ${c.trim()}`)):n==="fun"?(j="function",m+=`(${f||""})`,c&&(m+=`: ${c.trim()}`)):(j="property",c&&(m+=`: ${c.trim()}`)),p.push({id:`${n}-${d}-${u}`,name:d,type:j,signature:m,description:v,line:s.substring(0,u).split(`
`).length})}}else if(o==="flutter-dart"){const g=/(?:\/\*\*[\s\S]*?\*\/[\s\S]*?)?\b(class|mixin|enum|void|Future|Stream|List|Map|String|bool|int|double|[A-Z][a-zA-Z0-9]*)\s+([a-zA-Z0-9_]+)(?:<[^>]+>)?\s*(?:\(([^)]*)\))?/g;let t;for(;(t=g.exec(s))!==null;){const[,n,d,f]=t;if(["return","if","else","switch","for","while","throw","new","const","final"].includes(n))continue;const c=t.index,u=C(s,c);let v="function",j=`${n} ${d}`;["class","mixin","enum"].includes(n)||n.startsWith("Abstract")?v="class":f!==void 0?j+=`(${f})`:v="property",p.push({id:`${n}-${d}-${c}`,name:d,type:v,signature:j,description:u,line:s.substring(0,c).split(`
`).length})}}else{const g=/\b(class|interface|void|func|function)\s+([a-zA-Z0-9_]+)/g;let t;for(;(t=g.exec(s))!==null;){const[,n,d]=t,f=t.index;p.push({id:`${n}-${d}-${f}`,name:d,type:"class",signature:`${n} ${d}`,line:s.substring(0,f).split(`
`).length})}}return p},oe=()=>{const{t:a}=K(),[o,p]=z.useState([]),[s,g]=z.useState(null),[t,n]=z.useState(!1),[d,f]=z.useState({current:0,total:0,fileName:""}),[c,u]=z.useState(""),v=z.useCallback(async r=>{const h=r[0];if(h){n(!0);try{const i=await T.loadAsync(h),b=[],k=Object.keys(i.files).filter(l=>{const y=l.split("/"),N=new Set([".git",".gradle","node_modules","dist","build",".idea","__pycache__",".DS_Store"]);return!i.files[l].dir&&!y.some(x=>N.has(x))&&!l.includes("__MACOSX")&&!l.startsWith(".")});f({current:0,total:k.length,fileName:a("developerGuide.parsing")});for(let l=0;l<k.length;l++){const y=k[l];f({current:l+1,total:k.length,fileName:y}),await new Promise(A=>setTimeout(A,0));const N=await i.files[y].async("string"),x=Q(y,N);if(x){const A=V(N,x);A.length>0&&b.push({fileName:y,language:x,symbols:A})}}p(b.sort((l,y)=>l.fileName.localeCompare(y.fileName)))}catch(i){console.error("Failed to process zip",i)}finally{n(!1),f({current:0,total:0,fileName:""})}}},[]),j=z.useMemo(()=>o.filter(r=>r.fileName.toLowerCase().includes(c.toLowerCase())),[o,c]),m=r=>{switch(r){case"class":return e.jsx(Z,{size:14,className:"text-orange-500"});case"interface":return e.jsx(J,{size:14,className:"text-blue-500"});case"function":return e.jsx(H,{size:14,className:"text-purple-500"});case"property":return e.jsx(I,{size:14,className:"text-green-500"});default:return e.jsx(Z,{size:14,className:"text-gray-500"})}},w=async()=>{if(o.length===0)return;const r=new T,h=r.folder("documentation");if(!h)return;h.file("styles.css",`
            body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; max-width: 1200px; margin: 0 auto; padding: 20px; display: flex; gap: 20px; }
            nav { width: 300px; border-right: 1px solid #eee; padding-right: 20px; max-height: 100vh; overflow-y: auto; }
            main { flex: 1; min-width: 0; }
            a { text-decoration: none; color: #0366d6; }
            a:hover { text-decoration: underline; }
            .nav-item { display: block; padding: 5px 0; color: #555; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
            .nav-item:hover { color: #0366d6; }
            .symbol { margin-bottom: 2rem; border-bottom: 1px solid #eee; padding-bottom: 1rem; }
            .symbol-header { display: flex; align-items: baseline; gap: 10px; margin-bottom: 0.5rem; }
            .symbol-name { font-size: 1.1rem; font-weight: 600; }
            .symbol-type { font-size: 0.8rem; text-transform: uppercase; color: #666; background: #f6f8fa; padding: 2px 6px; rounded: 4px; }
            .signature { background: #f6f8fa; padding: 10px; border-radius: 6px; font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; font-size: 0.9em; overflow-x: auto; margin-bottom: 10px; }
            .doc-comment { background: #eef7ff; padding: 15px; border-left: 4px solid #0366d6; color: #24292e; white-space: pre-wrap; }
            .file-header { margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #eaecef; }
            h1 { margin: 0; font-size: 1.5rem; }
            h2 { font-size: 1.2rem; margin-top: 1.5rem; border-bottom: 1px solid #eaecef; padding-bottom: 0.3rem; }
        `);const b=o.map(x=>`<a href="${x.fileName.replace(/\//g,"_")}.html" class="nav-item">${x.fileName}</a>`).join("");o.forEach(x=>{const A=["class","interface","function","property"].map(G=>{const _=x.symbols.filter(S=>S.type===G);return _.length===0?"":`
                    <h2>${G.charAt(0).toUpperCase()+G.slice(1)}s</h2>
                    ${_.map(S=>`
                        <div class="symbol">
                            <div class="symbol-header">
                                <span class="symbol-name">${S.name}</span>
                                <span class="symbol-type">${S.type}</span>
                                <span style="font-size: 0.8em; color: #999;">Line ${S.line}</span>
                            </div>
                            <div class="signature">${S.signature}</div>
                            ${S.description?`<div class="doc-comment">${S.description}</div>`:""}
                        </div>
                    `).join("")}
                `}).join(""),R=`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>${x.fileName} - Developer Guide</title>
                    <link rel="stylesheet" href="styles.css">
                </head>
                <body>
                    <nav>
                        <h3>Files</h3>
                        ${b}
                    </nav>
                    <main>
                        <div class="file-header">
                            <h1>${x.fileName}</h1>
                            <span style="background: #e1e4e8; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem;">${x.language}</span>
                        </div>
                        ${A||"<p>No public symbols detected.</p>"}
                    </main>
                </body>
                </html>
            `;h.file(`${x.fileName.replace(/\//g,"_")}.html`,R)});const k=`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Developer Guide</title>
                <link rel="stylesheet" href="styles.css">
            </head>
            <body>
                <nav>
                    <h3>Files</h3>
                    ${b}
                </nav>
                <main style="display: flex; align-items: center; justify-content: center; color: #666; height: 80vh;">
                    <div style="text-align: center;">
                        <h1>Developer Guide</h1>
                        <p>Select a file from the sidebar to view documentation.</p>
                        <p>Generated on ${new Date().toLocaleDateString()}</p>
                    </div>
                </main>
            </body>
            </html>
        `;h.file("index.html",k);const l=await r.generateAsync({type:"blob"}),y=URL.createObjectURL(l),N=document.createElement("a");N.href=y,N.download="documentation.zip",document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(y)},$=()=>{p([]),g(null),u("")};return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"p-6 pb-2 shrink-0 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 flex items-center gap-2",children:[e.jsx(F,{size:24,className:"text-blue-600 dark:text-blue-400"}),a("developerGuide.title")]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:a("developerGuide.subtitle")})]}),o.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:w,className:"px-3 py-1.5 flex items-center gap-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors shadow-sm",children:[e.jsx(M,{size:14}),a("developerGuide.exportHtml")]}),e.jsxs("button",{onClick:$,className:"px-3 py-1.5 flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 hover:text-red-500 dark:hover:text-red-400 border border-gray-200 dark:border-gray-700 rounded-lg transition-colors shadow-sm",children:[e.jsx(P,{size:14}),a("developerGuide.newProject")]})]})]}),e.jsx("div",{className:"flex-1 flex min-h-0 p-6 pt-4 gap-6",children:o.length===0?e.jsx("div",{className:"w-full flex flex-col items-center justify-center p-12 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-2xl bg-white dark:bg-gray-800/50",children:t?e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-md px-4",children:[e.jsx("div",{className:"relative w-24 h-24",children:e.jsxs("svg",{className:"w-full h-full overflow-visible",children:[e.jsx("circle",{cx:"48",cy:"48",r:"36",className:"text-gray-200 dark:text-gray-700",strokeWidth:"8",stroke:"currentColor",fill:"transparent"}),e.jsx("circle",{cx:"48",cy:"48",r:"36",className:"text-blue-500 transition-all duration-300 ease-out",strokeWidth:"8",strokeLinecap:"round",stroke:"currentColor",fill:"transparent",strokeDasharray:"226.2",strokeDashoffset:226.2-226.2*(d.current/Math.max(d.total,1)),transform:"rotate(-90 48 48)"}),e.jsxs("text",{x:"48",y:"48",textAnchor:"middle",dominantBaseline:"central",className:"text-xl font-bold text-gray-700 dark:text-gray-200",fill:"currentColor",children:[Math.round(d.current/Math.max(d.total,1)*100),"%"]})]})}),e.jsxs("div",{className:"text-center w-full space-y-1",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:a("developerGuide.parsing")}),e.jsx("p",{className:"text-xs text-gray-400 font-mono whitespace-nowrap overflow-x-auto px-4 max-w-full no-scrollbar",children:d.fileName})]})]}):e.jsx(Y,{onFilesDropped:v,accept:".zip",multiple:!1,dragDropText:a("developerGuide.uploadZip"),supportedText:a("developerGuide.supports"),className:"border-none"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400",size:14}),e.jsx("input",{type:"text",value:c,onChange:r=>u(r.target.value),placeholder:a("developerGuide.searchPlaceholder"),className:"w-full pl-8 pr-3 py-1.5 text-xs bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j.map((r,h)=>e.jsxs("button",{onClick:()=>g(r),className:D("w-full text-left px-4 py-3 border-b border-gray-50 dark:border-gray-800/50 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors flex items-center gap-2 group",s?.fileName===r.fileName?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"border-l-4 border-l-transparent"),children:[e.jsx(O,{size:16,className:D("shrink-0",s?.fileName===r.fileName?"text-blue-500":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300")}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:D("text-sm font-medium truncate",s?.fileName===r.fileName?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"),children:r.fileName.split("/").pop()}),e.jsxs("div",{className:"text-[10px] text-gray-400 truncate flex items-center gap-1",children:[e.jsxs("span",{children:[r.symbols.length," symbols"]}),"â€¢",e.jsx("span",{className:"uppercase",children:r.language.split("-")[1]})]})]})]},h))})]}),e.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:s?e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"p-8 border-b border-gray-100 dark:border-gray-700 bg-gray-50/30 dark:bg-gray-900/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 text-gray-400 text-xs font-mono",children:[e.jsx(U,{size:12}),s.fileName]}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:s.fileName.split("/").pop()}),e.jsx("div",{className:"flex gap-2",children:e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-bold uppercase tracking-wider",children:s.language.split("-")[1]})})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[s.symbols.length===0&&e.jsx("p",{className:"text-gray-500 italic",children:a("developerGuide.noSymbols")}),["class","interface","function","property"].map(r=>{const h=s.symbols.filter(i=>i.type===r);return h.length===0?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold uppercase tracking-wider text-gray-400 flex items-center gap-2 border-b border-gray-100 dark:border-gray-700 pb-2",children:[m(r),a(r==="class"?"developerGuide.classes":r==="property"?"developerGuide.properties":r==="function"?"developerGuide.functions":"developerGuide.interfaces")]}),e.jsx("div",{className:"grid gap-6",children:h.map(i=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200",children:i.name}),e.jsxs("span",{className:"text-xs text-gray-400 font-mono",children:[a("developerGuide.line")," ",i.line]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-800 mb-3",children:e.jsx(W,{language:"typescript",style:X,customStyle:{margin:0,padding:"1rem",background:"transparent"},children:i.signature})}),i.description&&e.jsx("div",{className:"prose dark:prose-invert prose-sm text-gray-600 dark:text-gray-400 max-w-none bg-blue-50/50 dark:bg-blue-900/10 p-4 rounded-lg border-l-4 border-blue-400",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(B,{size:16,className:"text-blue-500 mt-0.5 shrink-0"}),e.jsx("div",{className:"whitespace-pre-line",children:i.description})]})}),i.children&&i.children.length>0&&e.jsxs("div",{className:"mt-4 border border-gray-100 dark:border-gray-800 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-4 py-2 border-b border-gray-100 dark:border-gray-800 text-xs font-bold text-gray-500 uppercase tracking-wider",children:a("developerGuide.members")}),e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:i.children.map(b=>e.jsxs("div",{className:"p-3 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:D("text-xs px-1.5 py-0.5 rounded border font-mono",b.type==="function"?"border-purple-200 text-purple-600 bg-purple-50 dark:bg-purple-900/20 dark:border-purple-800":"border-green-200 text-green-600 bg-green-50 dark:bg-green-900/20 dark:border-green-800"),children:b.type==="function"?"M":"P"}),e.jsx("span",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:b.name})]}),e.jsx("div",{className:"font-mono text-xs text-gray-500 dark:text-gray-400 pl-7",children:b.signature}),b.description&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 pl-7 italic",children:b.description})]},b.id))})]})]},i.id))})]},r)})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 gap-4",children:[e.jsx(F,{size:48,className:"opacity-20"}),e.jsx("p",{children:a("developerGuide.selectFile")})]})})]})})]})};export{oe as DeveloperGuide};
