import{j as e,k as V,c2 as xe,Y as ge,p as me,n as M,X as _,at as ae,f as le,A as we,ad as Ne}from"./ui-vendor-DEvE63cZ.js";import{r as g}from"./react-vendor-BGp5FbCG.js";import{J as ve,F as ze}from"./utils-vendor-CJFcDo9C.js";import{DropZone as Se}from"./DropZone-BveMg_CL.js";import{u as Ce,c as R}from"./index-D3BnbEK0.js";import{u as ne,a as Te}from"./xlsx-C4WIP9QO.js";import"./framer-vendor-DEiCTn3G.js";const Ee=({tags:a,onTagsChange:v,placeholder:W})=>{const[A,T]=g.useState(""),H=c=>{if(c.key==="Enter"||c.key===","){c.preventDefault();const j=A.trim().replace(",","");j&&!a.includes(j)&&(v([...a,j]),T(""))}else c.key==="Backspace"&&!A&&a.length>0&&v(a.slice(0,-1))},E=c=>{v(a.filter((j,u)=>u!==c))};return e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus-within:ring-2 focus-within:ring-blue-500 transition-shadow min-h-[46px]",children:[a.map((c,j)=>e.jsxs("span",{className:"flex items-center gap-1 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 text-xs font-medium px-2 py-1 rounded-md",children:[c,e.jsx("button",{onClick:()=>E(j),className:"hover:text-blue-600 dark:hover:text-blue-300",children:e.jsx(_,{size:12})})]},j)),e.jsx("input",{type:"text",value:A,onChange:c=>T(c.target.value),onKeyDown:H,onBlur:()=>{const c=A.trim();c&&!a.includes(c)&&(v([...a,c]),T(""))},className:"flex-1 bg-transparent border-none outline-none text-sm min-w-[120px] text-gray-700 dark:text-gray-200 placeholder:text-gray-400",placeholder:a.length===0?W:""})]})};function Me(){const{t:a}=Ce(),[v,W]=g.useState(!1),[A,T]=g.useState(0),[H,E]=g.useState(""),[c,j]=g.useState([]),[u,Q]=g.useState({web:{},android:{},ios:{}}),[$,be]=g.useState(""),[K,pe]=g.useState(!0),[U,he]=g.useState(null),[q,ue]=g.useState([".spec.ts",".test.ts",".stories.tsx",".d.ts"]),[G,ye]=g.useState(!1),[L,X]=g.useState(null),[z,ie]=g.useState(null),[h,Y]=g.useState(null);g.useEffect(()=>{h||X(null)},[h]);const oe=g.useCallback(async s=>{W(!0),j([]),Q({web:{},android:{},ios:{}}),T(0),E(a("projectTranslationVerifier.unzipping","Unzipping project..."));const l=q;try{const i=await new ve().loadAsync(s),S=["node_modules","library","libs","pod","pods","build","dist","target","out",".git",".gradle",".idea",".vscode"],F=d=>d.split("/").some(w=>S.includes(w.toLowerCase()))||d.startsWith("."),k=Object.entries(i.files).filter(([,d])=>!d.dir),P=k.length;E(a("projectTranslationVerifier.findingTranslations","Indexing translation files..."));const x={web:{},android:{},ios:{}};for(const[d,w]of k){if(F(d))continue;const y=d.split("/").pop()?.toLowerCase()||"";if(!l.some(m=>y.endsWith(m))){if(y.endsWith(".json")&&(d.includes("locale")||d.includes("i18n")||/^[a-z]{2}(-[A-Z]{2})?\.json$/.test(y))){const m=await w.async("string");try{const b=JSON.parse(m),f=new Map,p=(o,n="")=>{for(const t in o)typeof o[t]=="object"&&o[t]!==null?p(o[t],n+t+"."):f.set(n+t,String(o[t]))};p(b);const N=y.replace(".json","");x.web[N]||(x.web[N]=new Map),f.forEach((o,n)=>x.web[N].set(n,o))}catch{}}if(y==="strings.xml"){const m=await w.async("string"),b=new Map,f=/<string[^>]*name="([^"]+)"[^>]*>(.*?)<\/string>/gs;let p;for(;(p=f.exec(m))!==null;)b.set(p[1],p[2]);const N=d.split("/").slice(-2,-1)[0];let o="default";N.startsWith("values-")&&(o=N.replace("values-","")),x.android[o]||(x.android[o]=new Map),b.forEach((n,t)=>x.android[o].set(t,n))}if(y.endsWith(".strings")){const m=await w.async("string"),b=new Map,f=/"([^"]+)"\s*=\s*"([^"]*)";/g;let p;for(;(p=f.exec(m))!==null;)b.set(p[1],p[2]);const N=d.split("/").slice(-2,-1)[0];let o="Base";N.endsWith(".lproj")&&(o=N.replace(".lproj","")),x.ios[o]||(x.ios[o]=new Map),b.forEach((n,t)=>x.ios[o].set(t,n))}}}Q(x),E(a("projectTranslationVerifier.scanningSource","Scanning source code..."));const I=[];let D=0;for(const[d,w]of k){if(D++,D%50===0&&(T(D/P*100),await new Promise(n=>setTimeout(n,0))),F(d))continue;const y=d.split("/").pop()?.toLowerCase()||"";if(l.some(n=>y.endsWith(n)))continue;let m=null;if(/\.(tsx|ts|js|jsx|vue)$/.test(y)?m="web":/\.(kt|java|xml)$/.test(y)?m="android":/\.(swift|m|h|xib|storyboard)$/.test(y)&&(m="ios"),!m)continue;const b=await w.async("string"),f=new Set,p=new Map,N=n=>b.substring(0,n).split(`
`).length,o=(n,t)=>{f.add(n),p.has(n)||p.set(n,[]),p.get(n)?.push(N(t))};if(m==="web"){const n=/[^a-zA-Z0-9](t|\$t|i18n\.t)\(\s*['"]([^'"]+)['"]/g;let t;for(;(t=n.exec(b))!==null;)o(t[2],t.index)}else if(m==="android")if(y.endsWith(".xml")){const n=/@string\/([a-zA-Z0-9_.]+)/g;let t;for(;(t=n.exec(b))!==null;)o(t[1],t.index)}else{const n=/R\.string\.([a-zA-Z0-9_]+)/g;let t;for(;(t=n.exec(b))!==null;)o(t[1],t.index)}else if(m==="ios"){const n=/NSLocalizedString\s*\(\s*@"([^"]+)"/g;let t;for(;(t=n.exec(b))!==null;)o(t[1],t.index);const B=/String\s*\(localized:\s*"([^"]+)"/g;for(;(t=B.exec(b))!==null;)o(t[1],t.index);const J=/Text\s*\(\s*"([^"\s]+)"\s*\)/g;for(;(t=J.exec(b))!==null;)o(t[1],t.index)}if(f.size>0){const n=[],t=[],B=x[m],J=Object.keys(B);J.length===0?f.forEach(C=>{n.push(`${C} (No translation files found)`),t.push({key:C,lines:p.get(C)||[],status:{}})}):f.forEach(C=>{const de={},te=[];J.forEach(re=>{const ce=B[re].has(C);de[re]=ce,ce||te.push(re)});const ke=p.get(C)||[];te.length>0&&n.push(`${C} (missing in: ${te.join(", ")})`),t.push({key:C,lines:ke,status:de})}),t.length>0&&I.push({file:d,content:b,missingKeys:n,detailedKeys:t,platform:m,keysFound:f.size})}}j(I.sort((d,w)=>w.missingKeys.length-d.missingKeys.length))}catch(r){console.error(r),E(a("common.error","An error occurred during analysis"))}finally{W(!1),T(0),E("")}},[a,q]),Z=g.useMemo(()=>{let s=c;if(K&&(s=s.filter(l=>l.detailedKeys?l.detailedKeys.some(r=>Object.keys(r.status).length===0?!0:Object.values(r.status).some(i=>!i)):!1)),$){const l=$.toLowerCase();s=s.filter(r=>r.file.toLowerCase().includes(l)||r.missingKeys.some(i=>i.toLowerCase().includes(l)))}return s},[c,K,$]),ee=g.useMemo(()=>{const s=c.length,l=c.filter(i=>i.missingKeys.length>0).length,r=s-l;return{total:s,valid:r,invalid:l}},[c]),se=s=>{navigator.clipboard.writeText(s)},fe=()=>{const s=ne.book_new(),l=[];l.push(["File","Platform","Key","Status","Missing In","Line Numbers"]),Z.forEach(k=>{k.detailedKeys.filter(x=>!K||Object.values(x.status).some(I=>!I)).forEach(x=>{const I=Object.values(x.status).some(d=>!d),D=Object.entries(x.status).filter(([d,w])=>!w).map(([d])=>d).join(", ");l.push([k.file,k.platform,x.key,I?"Missing":"Valid",D,x.lines.join(", ")])})});const r=ne.aoa_to_sheet(l),i=[{wch:40},{wch:10},{wch:40},{wch:10},{wch:20},{wch:15}];r["!cols"]=i,ne.book_append_sheet(s,r,"Verification Results");const S=Te(s,{bookType:"xlsx",type:"array"}),F=new Blob([S],{type:"application/octet-stream"});ze.saveAs(F,`translation_verification_${new Date().toISOString().slice(0,10)}.xlsx`)},je=()=>{U&&oe(U)},O=s=>{let l=s.detailedKeys||[];return K&&(l=l.filter(r=>Object.keys(r.status).length===0?!0:Object.values(r.status).some(i=>!i))),l};return e.jsxs("div",{className:"h-full flex flex-col p-8 max-w-[1400px] mx-auto w-full font-khmer",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-8 text-slate-800 dark:text-white flex items-center gap-3",children:[e.jsx(V,{className:"text-blue-600",size:32}),a("projectTranslationVerifier.title","Project Translation Verifier")]}),e.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:[e.jsxs("button",{onClick:()=>ye(!G),className:"w-full flex items-center justify-between p-4 bg-gray-50/50 dark:bg-gray-900/50 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-700 dark:text-gray-200",children:[e.jsx(xe,{size:18,className:"text-blue-500"}),e.jsx("span",{children:"Configuration (Ignore Files & Extensions)"})]}),e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:G?"Hide":"Show"})]}),G&&e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ignored Extensions"}),e.jsx(Ee,{tags:q,onTagsChange:ue,placeholder:"e.g. .spec.ts"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Files ending with these extensions will be skipped. Press Enter to add."})]}),U&&e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsxs("button",{onClick:je,disabled:v,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 flex items-center gap-2",children:[v?e.jsx(ge,{size:16,className:"animate-spin"}):e.jsx(me,{size:16}),"Re-analyze Project"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"lg:col-span-2",children:!v&&c.length===0?e.jsx(Se,{onFilesDropped:s=>{s[0]&&s[0].name.endsWith(".zip")&&(he(s[0]),oe(s[0]))},accept:".zip",dragDropText:a("projectTranslationVerifier.dragDrop","Drag & drop project ZIP file"),supportedText:"Supports Web (React/Vue), Android, iOS projects",multiple:!1,className:"h-64"}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden flex flex-col h-[600px]",children:v?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[e.jsx(ge,{className:"w-12 h-12 text-blue-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:H}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Math.round(A),"%"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:a("common.totalFiles","Total Files")}),e.jsx("span",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:ee.total})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 uppercase tracking-wider mb-1",children:a("validation.valid","Valid")}),e.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:ee.valid})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-xs font-bold text-red-500 uppercase tracking-wider mb-1",children:a("validation.invalid","Invalid")}),e.jsx("span",{className:"text-2xl font-bold text-red-500",children:ee.invalid})]})]}),e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",value:$,onChange:s=>be(s.target.value),placeholder:a("common.search","Search files or keys..."),className:"pl-9 pr-4 py-2 text-sm border-none rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 placeholder:text-gray-400 ring-1 ring-gray-200 dark:ring-gray-700 focus:ring-2 focus:ring-blue-500 w-64"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:K,onChange:s=>pe(s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a("projectTranslationVerifier.showMissingOnly","Show missing only")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Z.length>0&&e.jsx("button",{onClick:fe,className:"p-2 text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:a("common.exportExcel","Export to Excel"),children:e.jsx(M,{size:20})}),e.jsx("button",{onClick:()=>{j([]),Q({web:{},android:{},ios:{}})},className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:a("common.clear","Clear"),children:e.jsx(_,{size:20})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Z.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(V,{size:48,className:"mb-4 text-green-500/50"}),e.jsx("p",{children:a("projectTranslationVerifier.noIssues","No missing translations found!")})]}):e.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-sm font-semibold text-gray-600 dark:text-gray-300 w-5/12",children:a("common.file","File")}),e.jsx("th",{className:"p-4 text-sm font-semibold text-gray-600 dark:text-gray-300 text-center w-24",children:a("common.platform","Platform")}),e.jsx("th",{className:"p-4 text-sm font-semibold text-gray-600 dark:text-gray-300 w-5/12",children:a("projectTranslationVerifier.missingKeys","Missing Keys")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:Z.map((s,l)=>{const r=s.file.split("/").pop(),i=s.file.split("/").slice(0,-1).join("/");return e.jsxs("tr",{className:"hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors group cursor-pointer",onClick:()=>Y(s),children:[e.jsx("td",{className:"p-4 align-top overflow-hidden",children:e.jsxs("div",{className:"flex items-start gap-2 max-w-full",children:[e.jsx(M,{size:16,className:"mt-1 text-gray-400 shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 truncate",title:r,children:r}),e.jsx("span",{className:"text-xs text-gray-500 truncate",title:i,children:i})]})]})}),e.jsx("td",{className:"p-4 text-center align-top",children:e.jsx("span",{className:R("px-2 py-1 rounded text-xs font-bold uppercase tracking-wider",s.platform==="web"&&"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",s.platform==="android"&&"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300",s.platform==="ios"&&"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),children:s.platform})}),e.jsx("td",{className:"p-4 align-top",children:s.detailedKeys&&s.detailedKeys.length>0?e.jsxs("div",{children:[e.jsx("ul",{className:"space-y-3 mb-1",children:O(s).slice(0,3).map((S,F)=>e.jsxs("li",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:14,className:"text-red-500 shrink-0"}),e.jsx("span",{className:"font-mono text-xs font-semibold text-gray-700 dark:text-gray-300 truncate",title:S.key,children:S.key})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 pl-5",children:Object.keys(u[s.platform]||{}).length===0?e.jsx("span",{className:"text-xs text-red-500 italic",children:"No translation files found"}):Object.keys(u[s.platform]).map(k=>{const P=S.status[k];return e.jsxs("span",{className:R("text-[10px] px-1.5 py-0.5 rounded border flex items-center gap-1",P?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800"),children:[e.jsx("span",{className:"font-medium opacity-80",children:k}),P?e.jsx(V,{size:8}):e.jsx("span",{children:"âœ—"})]},k)})})]},F))}),O(s).length>3&&e.jsxs("span",{className:"inline-block px-2 py-0.5 ml-5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["+",O(s).length-3," more"]}),O(s).length===0&&s.detailedKeys.length>0&&e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-green-600 dark:text-green-400",children:[e.jsx(V,{size:14}),a("validation.valid","All keys valid")," (Total: ",s.detailedKeys.length,")"]})]}):e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-green-600 dark:text-green-400",children:[e.jsx(V,{size:14}),a("validation.valid","Valid")]})})]},l)})})]})})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(xe,{size:20,className:"text-blue-500"}),a("projectTranslationVerifier.detectedTranslations","Detected Translations")]}),e.jsxs("div",{className:"space-y-6",children:[["web","android","ios"].map(s=>{const l=u[s],r=Object.keys(l);return r.length===0?null:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:s}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>e.jsxs("button",{onClick:()=>ie({platform:s,lang:i}),className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-700 px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:i}),e.jsx("span",{className:"bg-white dark:bg-gray-600 text-gray-500 dark:text-gray-300 text-xs px-1.5 rounded-md min-w-[24px] text-center border border-gray-100 dark:border-gray-500",children:l[i].size})]},i))})]},s)}),Object.keys(u.web).length===0&&Object.keys(u.android).length===0&&Object.keys(u.ios).length===0&&e.jsx("div",{className:"text-sm text-gray-400 italic text-center py-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:a("projectTranslationVerifier.noTranslationsFound","No translation files found yet. Upload a project to start.")})]})]}),z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-green-100 dark:bg-green-900/30 rounded-lg text-green-600 dark:text-green-400",children:e.jsx(le,{size:20})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white",children:[z.lang," (",z.platform,")"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[u[z.platform][z.lang]?.size||0," keys detected"]})]})]}),e.jsx("button",{onClick:()=>ie(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 p-2",children:e.jsx(_,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50/50 dark:bg-gray-900/20",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("button",{onClick:()=>se(Array.from(u[z.platform][z.lang].entries()).map(([s,l])=>`${s}=${l}`).join(`
`)),className:"text-xs font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 flex items-center gap-1",children:[e.jsx(M,{size:14})," Copy All"]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 font-mono text-xs text-gray-700 dark:text-gray-300 break-all space-y-2",children:Array.from(u[z.platform][z.lang]||[]).sort().map(([s,l],r)=>e.jsxs("div",{className:"flex flex-col gap-1 border-b border-gray-100 dark:border-gray-700 last:border-0 pb-2 mb-2",children:[e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400 select-all",children:s}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300 pl-4 border-l-2 border-gray-100 dark:border-gray-700 whitespace-pre-wrap select-all",children:l})]},r))})]})]})}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-100 dark:border-blue-900/30",children:[e.jsxs("h3",{className:"font-bold text-blue-800 dark:text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx(le,{size:20}),a("common.howItWorks","How it works")]}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-200 space-y-2 list-disc list-inside",children:[e.jsxs("li",{children:["Scans for ",e.jsx("code",{children:".json"})," (Web), ",e.jsx("code",{children:"strings.xml"})," (Android), and ",e.jsx("code",{children:".strings"})," (iOS)."]}),e.jsx("li",{children:"Extracts keys using regex from source code (`t('key')`, `@string/key`, `NSLocalizedString`)."}),e.jsx("li",{children:"Compares extracted usage against defined keys."}),e.jsx("li",{children:"Reports keys found in code but missing in translation files."})]})]})]})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-4xl max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[L?e.jsx("button",{onClick:()=>X(null),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-500 transition-colors",children:e.jsx(we,{size:20})}):e.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:e.jsx(M,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2",children:L?"Source Code":h.file.split("/").pop()}),e.jsx("p",{className:"text-xs text-gray-500 font-mono break-all line-clamp-1 max-w-md",title:h.file,children:h.file})]})]}),e.jsx("button",{onClick:()=>Y(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 p-2",children:e.jsx(_,{size:24})})]}),L?e.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-gray-900 font-mono text-xs relative",children:e.jsx("div",{className:"p-4 min-h-full",children:h.content?h.content.split(`
`).map((s,l)=>{const r=l+1,i=L.includes(r);return e.jsxs("div",{ref:i&&L[0]===r?S=>S?.scrollIntoView({block:"center",behavior:"smooth"}):null,className:R("flex gap-4 p-0.5 hover:bg-black/5 transition-colors rounded-sm",i&&"bg-yellow-100 dark:bg-yellow-900/30 ring-1 ring-yellow-200 dark:ring-yellow-800/50"),children:[e.jsx("span",{className:"text-gray-400 select-none w-8 text-right shrink-0 opacity-50",children:r}),e.jsx("span",{className:"whitespace-pre-wrap break-all text-gray-800 dark:text-gray-300",children:s||" "})]},l)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsx(le,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{children:"Source content not available"})]})})}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50 dark:bg-gray-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[e.jsx(ae,{size:16,className:R(K?"text-red-500":"text-gray-500")}),K?"Missing Keys":"All Keys"," (",O(h).length,")"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>se(h.missingKeys.join(`
`)),className:"text-xs font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 flex items-center gap-1 bg-blue-50 dark:bg-blue-900/20 px-3 py-1.5 rounded-lg transition-colors border border-blue-100 dark:border-blue-900/30",children:[e.jsx(M,{size:14}),"Copy Missing"]})})]}),e.jsx("div",{className:"grid gap-3",children:O(h).length>0?O(h).map((s,l)=>e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col gap-3 group",children:[e.jsxs("div",{className:"flex items-start gap-3 justify-between",children:[e.jsx("div",{className:"flex items-center gap-2 overflow-hidden",children:e.jsx("span",{className:"font-mono text-sm font-bold text-gray-700 dark:text-gray-200 break-all bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:s.key})}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.lines&&s.lines.length>0&&e.jsx("button",{onClick:()=>X(s.lines),className:"p-1.5 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",title:"View Code",children:e.jsx(Ne,{size:16})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),se(s.key)},className:"p-1.5 text-gray-400 hover:text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-md transition-colors",title:"Copy Key",children:e.jsx(M,{size:16})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 pl-1",children:Object.keys(u[h.platform]||{}).length===0?e.jsxs("span",{className:"text-xs text-red-500 italic flex items-center gap-1",children:[e.jsx(ae,{size:12})," No translation files found"]}):Object.keys(u[h.platform]).map(r=>{const i=s.status[r];return e.jsxs("span",{className:R("text-xs px-2 py-1 rounded-md border flex items-center gap-1.5 transition-colors",i?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800"),children:[e.jsx("span",{className:"font-medium",children:r}),i?e.jsx(V,{size:10}):e.jsx(_,{size:10})]},r)})})]},l)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[e.jsx(V,{size:32,className:"mb-2 text-green-500/50"}),e.jsx("p",{children:"No keys to display based on current filters."})]})})]}),!L&&e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-b-2xl flex justify-end",children:e.jsx("button",{onClick:()=>Y(null),className:"px-5 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition-colors font-medium text-sm",children:"Close"})})]})})]})}export{Me as ProjectTranslationVerifier};
