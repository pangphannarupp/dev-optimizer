import{j as r,d as F,x as O,M as T,aO as Z,o as A,I as q}from"./ui-vendor-DEvE63cZ.js";import{r as f}from"./react-vendor-BGp5FbCG.js";import{X as J,o as K,j,D as V,n as _,c as N,U as ee}from"./index.min-C4a0yx6H.js";import{DropZone as re}from"./DropZone-BveMg_CL.js";import{u as te,c as P}from"./index-D3BnbEK0.js";import"./framer-vendor-DEiCTn3G.js";import"./utils-vendor-CJFcDo9C.js";const W={iphone:{name:"iPhone 15 Pro",width:1200,height:2550,screenX:60,screenY:60,screenWidth:1080,screenHeight:2430,cornerRadius:140,frameColor:"#2b2b2b"},pixel:{name:"Pixel 8",width:1080,height:2400,screenX:40,screenY:40,screenWidth:1e3,screenHeight:2320,cornerRadius:80,frameColor:"#3c4043"},browser:{name:"Browser Window",width:1400,height:900,screenX:0,screenY:80,screenWidth:1400,screenHeight:820,cornerRadius:20,frameColor:"#ffffff"},none:{name:"No Frame",width:1e3,height:1e3,screenX:0,screenY:0,screenWidth:1e3,screenHeight:1e3,cornerRadius:0,frameColor:"transparent"}},ae=[{name:"Transparent",value:"transparent"},{name:"White",value:"#ffffff"},{name:"Black",value:"#000000"},{name:"Blue Gradient",value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{name:"Sunset",value:"#ff9a9e"},{name:"Mint",value:"#a8edea"}],fe=()=>{const{t:h}=te(),y=f.useRef(null),[o,X]=f.useState(null),[l,L]=f.useState("iphone"),[g,k]=f.useState(null),[u,C]=f.useState("#ffffff"),[m,B]=f.useState(100),[p,E]=f.useState("");f.useEffect(()=>{if(!y.current)return;const e=new J(y.current,{width:800,height:600,backgroundColor:"#f3f4f6",selection:!1});return X(e),()=>{e.dispose()}},[]);const M=(e,a,s,t,n)=>`M ${e+n} ${a} L ${e+s-n} ${a} Q ${e+s} ${a} ${e+s} ${a+n} L ${e+s} ${a+t-n} Q ${e+s} ${a+t} ${e+s-n} ${a+t} L ${e+n} ${a+t} Q ${e} ${a+t} ${e} ${a+t-n} L ${e} ${a+n} Q ${e} ${a} ${e+n} ${a} Z`,U=(e,a,s,t,n)=>`M ${e+n} ${a} Q ${e} ${a} ${e} ${a+n} L ${e} ${a+t-n} Q ${e} ${a+t} ${e+n} ${a+t} L ${e+s-n} ${a+t} Q ${e+s} ${a+t} ${e+s} ${a+t-n} L ${e+s} ${a+n} Q ${e+s} ${a} ${e+s-n} ${a} Z`,R=f.useCallback(async()=>{if(!(!o||!g)){o.clear(),o.backgroundColor=u;try{const e=URL.createObjectURL(g),a=new Image;a.src=e,await new Promise(i=>a.onload=i);const s=new K(a),t=W[l],n=t.width+m*2,S=t.height+m*2+(p?400:0),$=Math.min(800/n,600/S);o.setDimensions({width:n*$,height:S*$}),o.setZoom($);const c=m,d=m+(p?200:0);if(l!=="none"){const i=new j({left:c,top:d,width:t.width,height:t.height,rx:t.cornerRadius,ry:t.cornerRadius,fill:t.frameColor,shadow:new V({color:"rgba(0,0,0,0.4)",blur:50,offsetX:0,offsetY:30}),selectable:!1,evented:!1});o.add(i)}const w=40,H=(t.screenWidth+w)/s.width,z=(t.screenHeight+w)/s.height,D=Math.max(H,z);if(s.set({scaleX:D,scaleY:D,left:c+t.screenX-w/2,top:d+t.screenY-w/2,originX:"left",originY:"top",selectable:!1,evented:!1,clipPath:new j({left:c+t.screenX,top:d+t.screenY,width:t.screenWidth,height:t.screenHeight,rx:l==="browser"?0:Math.max(0,t.cornerRadius-t.screenX),ry:l==="browser"?0:Math.max(0,t.cornerRadius-t.screenX),absolutePositioned:!0})}),o.add(s),l!=="none"){const i=M(c,d,t.width,t.height,t.cornerRadius),b=t.screenX,x=Math.max(0,t.cornerRadius-b),v=l==="browser"?0:x,Q=U(c+t.screenX,d+t.screenY,t.screenWidth,t.screenHeight,v),I=i+" "+Q,G=new _(I,{fill:t.frameColor,fillRule:"nonzero",strokeWidth:0,selectable:!1,evented:!1});o.add(G)}if(l!=="none")if(l==="browser"){const i=new N({radius:8,fill:"#ff5f56",left:c+20,top:d+20,selectable:!1,evented:!1}),b=new N({radius:8,fill:"#ffbd2e",left:c+45,top:d+20,selectable:!1,evented:!1}),x=new N({radius:8,fill:"#27c93f",left:c+70,top:d+20,selectable:!1,evented:!1}),v=new j({width:t.width-120,height:36,fill:"#f1f1f1",rx:5,ry:5,left:c+100,top:d+12,selectable:!1,evented:!1});o.add(i),o.add(b),o.add(x),o.add(v)}else{const i=l==="iphone"?360:40,b=l==="iphone"?100:40,x=20,v=new j({width:i,height:b,fill:"#000000",rx:x,ry:x,left:c+(t.width-i)/2,top:d+20,selectable:!1,evented:!1});o.add(v)}if(p){const i=new ee(p,{width:n,left:0,top:m,fontSize:80,textAlign:"center",fill:"#333333",fontFamily:"-apple-system, BlinkMacSystemFont, Arial, sans-serif",selectable:!0,splitByGrapheme:!0});o.add(i)}o.requestRenderAll()}catch(e){console.error("Error rendering screenshot frame:",e)}}},[o,g,l,u,m,p]);f.useEffect(()=>{R()},[R]);const Y=()=>{if(!o)return;const e=o.getZoom(),a=o.toDataURL({format:"png",quality:1,multiplier:1/e}),s=document.createElement("a");s.download="framed_screenshot.png",s.href=a,document.body.appendChild(s),s.click(),document.body.removeChild(s)};return r.jsxs("div",{className:"h-full flex flex-col gap-6 p-6 overflow-y-auto",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("h1",{className:"text-2xl font-bold dark:text-white flex items-center gap-2",children:[r.jsx(F,{className:"w-8 h-8 text-blue-500"}),h("screenshotFramer.title","Screenshot Framer")]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h("screenshotFramer.description","Create professional device mockups for your app store listings.")})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full min-h-[600px]",children:[r.jsxs("div",{className:"col-span-1 flex flex-col gap-6 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-y-auto",children:[r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("screenshotFramer.image","Screenshot")}),g?r.jsxs("div",{className:"relative group w-full",children:[r.jsx("img",{src:URL.createObjectURL(g),className:"w-full h-40 object-contain bg-gray-100 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 p-2"}),r.jsx("button",{onClick:()=>k(null),className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-all shadow-md hover:bg-red-600 hover:scale-110",children:r.jsx(O,{size:16})})]}):r.jsx(re,{onFilesDropped:e=>k(e[0]),multiple:!1,className:"min-h-[140px]",dragDropText:"Drop screenshot here",supportedText:"Supports PNG, JPG, WEBP"})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("screenshotFramer.device","Device Frame")}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(W).map(([e,a])=>r.jsxs("button",{onClick:()=>L(e),className:P("p-3 rounded-xl border flex flex-col items-center justify-center gap-2 text-sm transition-all h-24",l===e?"bg-blue-500 text-white border-blue-600 shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500 text-gray-600 dark:text-gray-400"),children:[e==="browser"?r.jsx(T,{size:24}):e==="none"?r.jsx(Z,{size:24}):r.jsx(F,{size:24}),r.jsx("span",{className:"font-medium",children:a.name})]},e))})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("screenshotFramer.background","Background")}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[ae.map(e=>r.jsx("button",{onClick:()=>C(e.value),className:P("w-10 h-10 rounded-full border-2 shadow-sm transition-all hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 relative overflow-hidden",u===e.value?"border-blue-500 scale-110":"border-gray-200 dark:border-gray-600"),style:{background:e.value==="transparent"?"white":e.value},title:e.name,children:e.value==="transparent"&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-full h-px bg-red-500 transform rotate-45 scale-125"})})},e.name)),r.jsxs("div",{className:"relative w-10 h-10 rounded-full overflow-hidden border-2 border-gray-200 dark:border-gray-600 shadow-sm transition-transform hover:scale-110 group",children:[r.jsx("input",{type:"color",value:u.startsWith("#")||u.startsWith("rgb")?u:"#ffffff",onChange:e=>C(e.target.value),className:"absolute inset-0 w-[150%] h-[150%] -top-[25%] -left-[25%] p-0 border-0 cursor-pointer"}),r.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center text-gray-400 group-hover:text-gray-600",children:r.jsx("span",{className:"text-xs",children:"+"})})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-5",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("screenshotFramer.padding","Padding")}),r.jsxs("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-600 dark:text-gray-300",children:[m,"px"]})]}),r.jsx("input",{type:"range",min:"0",max:"300",value:m,onChange:e=>B(Number(e.target.value)),className:"w-full accent-blue-500 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("screenshotFramer.caption","Caption")}),r.jsx("input",{type:"text",value:p,onChange:e=>E(e.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all placeholder-gray-400",placeholder:"Enter caption text..."})]})]}),r.jsxs("button",{onClick:Y,disabled:!g,className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none",children:[r.jsx(A,{size:24}),h("screenshotFramer.download","Download PNG")]})]}),r.jsxs("div",{className:"col-span-1 lg:col-span-2 bg-gray-100 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center overflow-hidden relative shadow-inner",children:[r.jsx("div",{className:"absolute inset-0 pattern-grid opacity-10 pointer-events-none"}),r.jsx("canvas",{ref:y}),!g&&r.jsxs("div",{className:"absolute text-gray-400 flex flex-col items-center gap-2 pointer-events-none",children:[r.jsx(q,{size:48}),r.jsx("p",{children:"Upload a screenshot to start"})]})]})]})]})};export{fe as ScreenshotFramer};
